{
    "cobol_file": {
        "file_name": "successful_snippet_52df45c7.cob",
        "content": "      \n      \n      \n      \n       identification division.\n       program-id. append.\n\n       environment division.\n       configuration section.\n       repository.\n           function all intrinsic.\n\n       input-output section.\n       file-control.\n           select pass-file\n           assign to pass-filename\n           organization is line sequential\n           status is pass-status.\n\n       REPLACE ==:LRECL:== BY ==2048==.\n\n       data division.\n       file section.\n       fd pass-file record varying depending on pass-length.\n       01 fd-pass-record.\n          05 filler pic x occurs 0 to :LRECL: times\n                          depending on pass-length.\n\n       working-storage section.\n       01 pass-filename.\n          05 filler            value \"passfile\".\n       01 pass-status          pic xx.\n          88 ok-status         values '00' thru '09'.\n          88 eof-pass          value '10'.\n\n       01 pass-length          usage index.\n       01 total-length         usage index.\n\n       77 file-action          pic x(11).\n\n       01 pass-record.\n          05 account           pic x(64).\n             88 key-account    value \"xyz\".\n          05 password          pic x(64).\n          05 uid               pic z(4)9.\n          05 gid               pic z(4)9.\n          05 details.\n             10 fullname       pic x(128).\n             10 office         pic x(128).\n             10 extension      pic x(32).\n             10 homephone      pic x(32).\n             10 email          pic x(256).\n          05 homedir           pic x(256).\n          05 shell             pic x(256).\n\n       77 colon                pic x value \":\".\n       77 comma-mark           pic x value \",\".\n       77 newline              pic x value x\"0a\".\n\n      \n       procedure division.\n       main-routine.\n       perform initial-fill\n\n       >>IF DEBUG IS DEFINED \n       display \"Initial data:\"\n       perform show-records\n       >>END-IF\n\n       perform append-record\n \n       >>IF DEBUG IS DEFINED \n       display newline \"After append:\"\n       perform show-records\n       >>END-IF\n\n       perform verify-append\n       goback\n       .\n\n      \n       initial-fill.\n       perform open-output-pass-file\n\n       move \"jsmith\" to account\n       move \"x\" to password\n       move 1001 to uid\n       move 1000 to gid\n       move \"Joe Smith\" to fullname\n       move \"Room 1007\" to office\n       move \"(234)555-8917\" to extension\n       move \"(234)555-0077\" to homephone\n       move \"jsmith@rosettacode.org\" to email\n       move \"/home/jsmith\" to homedir\n       move \"/bin/bash\" to shell\n       perform write-pass-record\n\n       move \"jdoe\" to account\n       move \"x\" to password\n       move 1002 to uid\n       move 1000 to gid\n       move \"Jane Doe\" to fullname\n       move \"Room 1004\" to office\n       move \"(234)555-8914\" to extension\n       move \"(234)555-0044\" to homephone\n       move \"jdoe@rosettacode.org\" to email\n       move \"/home/jdoe\" to homedir\n       move \"/bin/bash\" to shell\n       perform write-pass-record\n\n       perform close-pass-file\n       .\n\n      \n       check-pass-file.\n       if not ok-status then\n           perform file-error\n       end-if\n       .\n\n      \n       check-pass-with-eof.\n       if not ok-status and not eof-pass then\n           perform file-error\n       end-if\n       .\n\n      \n       file-error.\n       display \"error \" file-action space pass-filename\n               space pass-status upon syserr\n       move 1 to return-code\n       goback\n       .\n\n      \n       append-record.\n       move \"xyz\" to account\n       move \"x\" to password\n       move 1003 to uid\n       move 1000 to gid\n       move \"X Yz\" to fullname\n       move \"Room 1003\" to office\n       move \"(234)555-8913\" to extension\n       move \"(234)555-0033\" to homephone\n       move \"xyz@rosettacode.org\" to email\n       move \"/home/xyz\" to homedir\n       move \"/bin/bash\" to shell\n\n       perform open-extend-pass-file\n       perform write-pass-record\n       perform close-pass-file\n       .\n\n      \n       open-output-pass-file.\n       open output pass-file with lock\n       move \"open output\" to file-action\n       perform check-pass-file\n       .\n\n      \n       open-extend-pass-file.\n       open extend pass-file with lock\n       move \"open extend\" to file-action\n       perform check-pass-file\n       .\n\n      \n       open-input-pass-file.\n       open input pass-file\n       move \"open input\" to file-action\n       perform check-pass-file\n       .\n\n      \n       close-pass-file.\n       close pass-file\n       move \"closing\" to file-action\n       perform check-pass-file\n       .\n\n      \n       write-pass-record.\n       set total-length to 1\n       set pass-length to :LRECL:\n       string\n           account delimited by space\n           colon\n           password delimited by space\n           colon\n           trim(uid leading) delimited by size\n           colon\n           trim(gid leading) delimited by size\n           colon\n           trim(fullname trailing) delimited by size\n           comma-mark\n           trim(office trailing) delimited by size\n           comma-mark\n           trim(extension trailing) delimited by size\n           comma-mark\n           trim(homephone trailing) delimited by size\n           comma-mark\n           email delimited by space\n           colon\n           trim(homedir trailing) delimited by size\n           colon\n           trim(shell trailing) delimited by size\n           into fd-pass-record with pointer total-length\n           on overflow\n               display \"error: fd-pass-record truncated at \"\n                       total-length upon syserr\n       end-string\n       set pass-length to total-length\n       set pass-length down by 1\n\n       write fd-pass-record\n       move \"writing\" to file-action\n       perform check-pass-file\n       .\n\n      \n       read-pass-file.\n       read pass-file\n       move \"reading\" to file-action\n       perform check-pass-with-eof\n       .\n\n      \n       show-records.\n       perform open-input-pass-file\n\n       perform read-pass-file\n       perform until eof-pass\n           perform show-pass-record\n           perform read-pass-file\n       end-perform\n\n       perform close-pass-file\n       .\n\n      \n       show-pass-record.\n       display fd-pass-record\n       .\n\n      \n       verify-append.\n       perform open-input-pass-file\n\n       move 0 to tally\n       perform read-pass-file\n       perform until eof-pass\n           add 1 to tally\n           unstring fd-pass-record delimited by colon\n               into account\n           if key-account then exit perform end-if\n           perform read-pass-file\n       end-perform\n       if (key-account and tally not > 2) or (not key-account) then\n           display\n               \"error: appended record not found in correct position\"\n              upon syserr\n       else\n           display \"Appended record: \" with no advancing\n           perform show-pass-record\n       end-if\n\n       perform close-pass-file\n       .\n\n       end program append.\n"
    },
    "input_files": [],
    "output_files": [],
    "input_output_files": [],
    "sysin_file": null,
    "code_file": "successful_snippet_52df45c7.cob",
    "compiled_file": "successful_snippet_52df45c7",
    "expected_output": "Appended record: xyz:x:1003:1000:X Yz,Room 1003,(234)555-8913,(234)555-0033,xyz@rosettacode.org:/home/xyz:/bin/bash\n",
    "expected_output_files": [],
    "expected_input_output_files": []
}